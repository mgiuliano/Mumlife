{% extends "base.html" %}

{% block bodyclass %}members{% endblock %}

{% block heading %}<h1>Members</h1>{% endblock %}

{% block header %}
<div class="search-form">
    <form method="post" action="{{ SITE_URL }}members/">
        {% csrf_token %}
        <input type="text" data-clear-btn="true" name="terms" placeholder="search #interests" value="{% if tagstring %}{{ tagstring }}{% endif %}" />
    </form>
</div>
{% endblock %}

{% block content %}
<div class="members">
    {% if members %}
        {% for member in members %}
        <div class="member clearfix">
            <div class="member-left">
                <div class="picture"><a href="{{ SITE_URL }}profile/{{ member.slug }}"><img
                    class="avatar"
                    src="{% if member.picture %}{{ member.picture }}{% else %}{{ STATIC_URL }}img/picture-default.png{% endif %}"
                    alt="{{ member.name }}" width="48" height="48" /></a></div>
            </div>
            <div class="member-right">
                <div class="member-author">
                    <a href="{{ SITE_URL }}profile/{{ member.slug }}">{{ member.name }}</a>
                    <span>({{ member.distance }})</span>
                </div>
                <div class="member-body">
                    {% for tag in member.tags %}<span><a href="{{ SITE_URL }}members/%23{{ tag.key }}">{{ tag.value }}</a></span> {% endfor %}
                </div>
                <div class="member-tools clearfix">
                    {% if member.friend_status and member.friend_status == 'Approved' %}
                        <img src="{{ STATIC_URL }}img/z.gif" class="icon icon-friend" alt="" />
                    {% elif member.friend_status and member.friend_status == 'Pending' %}
                        <img src="{{ STATIC_URL }}img/z.gif" class="icon icon-pendingfriend" alt="" />
                    {% elif member.friend_status and member.friend_status == 'Requesting' %}
                        <a class="addtofriend" href="#{{ account.id }},{{ member.id }}" rel="confirm">
                            <img src="{{ STATIC_URL }}img/z.gif" class="icon icon-confirmfriend" alt="" />
                        </a>
                    {% elif member.friend_status and member.friend_status == 'Blocked' %}
                        {% comment %}This member relationship is blocked{% endcomment %}
                        <span>&nbsp;</span>
                    {% else %}
                        <a class="addtofriend" href="#{{ account.id }},{{ member.id }}">
                            <img src="{{ STATIC_URL }}img/z.gif" class="icon icon-addtofriend" alt="" />
                        </a>
                    {% endif %}
                </div>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <h2>No Results</h2>
        <p><a href="{{ SITE_URL }}members/">See ALL</a></p>
    {% endif %}
</div>
{% endblock %}

{% block extrajs %}{{ block.super }}
<script type="text/javascript">
    $(document).on('ml.Ready', function () {
        new ML.AddToFriends({'class': 'addtofriend'});
    });
</script>
{% endblock %}
